import streamlit as st
import openai

# Set up OpenAI API key
openai.api_key = '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'

def chat_with_gpt3(prompt):
    try:
        response = openai.Completion.create(
            engine="gpt-3.5-turbo-instruct",
            prompt=prompt,
            max_tokens=100,
            temperature=0.7,
            stop=["\n", "User:"],  # Stop completion at newline or "User:" prompt
            echo=True  # Echo user input in the bot response
        )
        return response['choices'][0]['text']
    except Exception as e:
        return f"Error: {e}"

def apps():
    st.title("Waste Classifier Chatbox ")

    # Chatbot conversation loop
    user_input = st.text_input("You: ")
    if st.button("Send"):
        prompt = "User: " + user_input + "\nBot:"
        bot_response = chat_with_gpt3(prompt)
        st.write("Bot:")
        st.text_area("", value=bot_response, height=100, max_chars=None, key=None)  # Display bot response in a box

if __name__ == "__main__":
    apps()